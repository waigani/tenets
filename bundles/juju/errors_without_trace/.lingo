tenets:
  - bots:
      codelingo/clair:
        doc: Find errors that are not returned with error.Trace
        comments: Errors should be returned with errors.Trace(err)
        name: Find untraced errors
    query: |
      import codelingo/ast/go/0.0.0

      go.func_decl({depth: any}):
        go.assign_stmt({depth: any}):
          go.lhs:
            @ clair.comment
            go.ident({depth: any}):
              type: "error"
        !go.if_stmt({depth: any}):
          go.binary_expr:
            go.ident:
              type: "error"
          go.block_stmt:
            go.call_expr({depth: any}):
              go.selector_expr:
                name: "Trace"
                go.ident:
                  name: "errors"

